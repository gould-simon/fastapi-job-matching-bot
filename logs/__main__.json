{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T00:17:41.825343", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T00:17:41.825422", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 40, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T00:17:41.850965", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 682, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T00:17:41.851009", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 683, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T00:17:41.851146", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 708, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T00:17:41.851186", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 711, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T00:17:41.976494", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 718, "function": "main"}
{"message": "Start command received from user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:17:48.801252", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 55, "function": "start"}
{"message": "Welcome message sent to user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:17:48.943047", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 67, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:17:48.943806", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 73, "function": "start"}
{"message": "Creating new user...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:17:58.595744", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 82, "function": "start"}
{"message": "New user registered: 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:17:59.535414", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 91, "function": "start"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:18:05.129610", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 138, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager roles in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:18:05.132024", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:18:05.132397", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 143, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:18:05.935936", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 154, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:18:05.936398", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 169, "function": "process_job_preferences"}
{"message": "Error in semantic search: NameError - name 'Job' is not defined", "exc_info": "Traceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 170, in process_job_preferences\n    jobs_count = await db.scalar(select(func.count()).select_from(Job))\n                                                                  ^^^\nNameError: name 'Job' is not defined", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:18:05.947075", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 247, "function": "process_job_preferences", "exc_type": "NameError", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 735, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 247, in process_job_preferences\n    logger.error(f\"Error in semantic search: {error_type} - {error_msg}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T00:19:14.498821", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 737, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T00:19:16.130416", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T00:19:16.130488", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 40, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T00:19:16.156271", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 682, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T00:19:16.156314", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 683, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T00:19:16.156447", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 708, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T00:19:16.156487", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 711, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T00:19:16.265769", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 718, "function": "main"}
{"message": "Start command received from user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:22.977282", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 55, "function": "start"}
{"message": "Welcome message sent to user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:23.167530", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 67, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:23.167915", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 73, "function": "start"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:37.949241", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 138, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager roles in New York", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:37.949382", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:37.949440", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 143, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:38.944760", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 154, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:38.945177", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 169, "function": "process_job_preferences"}
{"message": "Error in semantic search: NameError - name 'JobEmbedding' is not defined", "exc_info": "Traceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 171, in process_job_preferences\n    embeddings_count = await db.scalar(select(func.count()).select_from(JobEmbedding))\n                                                                        ^^^^^^^^^^^^\nNameError: name 'JobEmbedding' is not defined", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:19:41.105948", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 247, "function": "process_job_preferences", "exc_type": "NameError", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 735, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 247, in process_job_preferences\n    logger.error(f\"Error in semantic search: {error_type} - {error_msg}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T00:20:33.008892", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 737, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T00:20:34.496027", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T00:20:34.496089", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 40, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T00:20:34.522182", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 682, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T00:20:34.522225", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 683, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T00:20:34.522360", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 708, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T00:20:34.522399", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 711, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T00:20:34.628752", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 718, "function": "main"}
{"message": "Start command received from user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:38.594919", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 55, "function": "start"}
{"message": "Welcome message sent to user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:38.678457", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 67, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:38.678785", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 73, "function": "start"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:49.497999", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 138, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager roles in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:49.498184", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:49.498290", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 143, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:50.402462", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 154, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:50.402707", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 169, "function": "process_job_preferences"}
{"message": "Error in semantic search: ProgrammingError - (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation \"job_embeddings\" does not exist\n[SQL: SELECT count(*) AS count_1 \nFROM job_embeddings]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "exc_info": "Traceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 521, in _prepare_and_execute\n    prepared_stmt, attributes = await adapt_connection._prepare(\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        operation, self._invalidate_schema_cache_asof\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 768, in _prepare\n    prepared_stmt = await self._connection.prepare(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        operation, name=self._prepared_statement_name_func()\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/asyncpg/connection.py\", line 635, in prepare\n    return await self._prepare(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/asyncpg/connection.py\", line 653, in _prepare\n    stmt = await self._get_statement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/asyncpg/connection.py\", line 432, in _get_statement\n    statement = await self._protocol.prepare(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n    )\n    ^\n  File \"asyncpg/protocol/protocol.pyx\", line 165, in prepare\nasyncpg.exceptions.UndefinedTableError: relation \"job_embeddings\" does not exist\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 942, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 580, in execute\n    self._adapt_connection.await_(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self._prepare_and_execute(operation, parameters)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 558, in _prepare_and_execute\n    self._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 508, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 792, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedTableError'>: relation \"job_embeddings\" does not exist\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 171, in process_job_preferences\n    embeddings_count = await db.scalar(select(func.count()).select_from(JobEmbedding))\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py\", line 519, in scalar\n    return await greenlet_spawn(\n           ^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2413, in scalar\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        **kw,\n        ^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py\", line 305, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py\", line 515, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1843, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 2352, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 942, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 580, in execute\n    self._adapt_connection.await_(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self._prepare_and_execute(operation, parameters)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 558, in _prepare_and_execute\n    self._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 508, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 792, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation \"job_embeddings\" does not exist\n[SQL: SELECT count(*) AS count_1 \nFROM job_embeddings]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T00:20:53.148994", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 247, "function": "process_job_preferences", "exc_type": "ProgrammingError", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 735, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 247, in process_job_preferences\n    logger.error(f\"Error in semantic search: {error_type} - {error_msg}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T01:33:00.486857", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 737, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T09:42:41.811691", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T09:42:41.811886", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 40, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T09:42:41.837800", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 682, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T09:42:41.837845", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 683, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T09:42:41.837982", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 708, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T09:42:41.838022", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 711, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T09:42:41.978368", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 718, "function": "main"}
{"message": "\ud83d\udc64 User (gould123): hi", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:39.116478", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 105, "function": "handle_message"}
{"message": "\ud83e\udd16 Bot: Hello! How can I assist you today with your accounting career or job search?", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:40.447648", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 111, "function": "handle_message"}
{"message": "Start command received from user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:45.457480", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 55, "function": "start"}
{"message": "Welcome message sent to user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:45.556491", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 67, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:45.556893", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 73, "function": "start"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:57.659256", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 138, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager roles in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:57.659372", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:57.659428", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 143, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:58.564633", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 154, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:43:58.565017", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 169, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:44:01.874516", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 173, "function": "process_job_preferences"}
{"message": "Error in semantic search: RuntimeError - Failed to execute search query: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: [-0.017596900463104248, -0.0377140715718... (expected str, got list)\n[SQL: SELECT \"JobsApp_job\".id, \"JobsApp_job\".job_title, \"JobsApp_job\".seniority, \"JobsApp_job\".service, \"JobsApp_job\".industry, \"JobsApp_job\".location, \"JobsApp_job\".employment, \"JobsApp_job\".salary, \"JobsApp_job\".description, \"JobsApp_job\".link, \"JobsApp_job\".created_at, \"JobsApp_accountingfirm\".name AS firm_name, l2_distance(job_embeddings.embedding_vector, $1) AS similarity \nFROM job_embeddings JOIN \"JobsApp_job\" ON job_embeddings.job_id = \"JobsApp_job\".id JOIN \"JobsApp_accountingfirm\" ON \"JobsApp_job\".firm_id = \"JobsApp_accountingfirm\".id \nWHERE job_embeddings.embedding_vector IS NOT NULL AND lower(\"JobsApp_job\".location) LIKE $2::VARCHAR ORDER BY similarity \n LIMIT $3::INTEGER]\n[parameters: ([-0.017596900463104248, -0.037714071571826935, -0.014874106273055077, -0.04812519624829292, -0.03207346424460411, 0.023192504420876503, -0.03453372791 ... (34038 characters truncated) ... 37789873406291, -0.005190560594201088, -0.002342127962037921, -0.019652122631669044, -0.002910314127802849, 0.010321114212274551, -0.0248876865953207], '%new york%', 5)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)", "exc_info": "Traceback (most recent call last):\n  File \"asyncpg/protocol/prepared_stmt.pyx\", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg\n  File \"asyncpg/protocol/codecs/base.pyx\", line 227, in asyncpg.protocol.protocol.Codec.encode\n  File \"asyncpg/protocol/codecs/base.pyx\", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar\n  File \"asyncpg/pgproto/./codecs/text.pyx\", line 29, in asyncpg.pgproto.pgproto.text_encode\n  File \"asyncpg/pgproto/./codecs/text.pyx\", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size\nTypeError: expected str, got list\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 545, in _prepare_and_execute\n    self._rows = deque(await prepared_stmt.fetch(*parameters))\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/asyncpg/prepared_stmt.py\", line 176, in fetch\n    data = await self.__bind_execute(args, 0, timeout)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/asyncpg/prepared_stmt.py\", line 267, in __bind_execute\n    data, status, _ = await self.__do_execute(\n                      ^^^^^^^^^^^^^^^^^^^^^^^^\n        lambda protocol: protocol.bind_execute(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            self._state, args, '', limit, True, timeout))\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/asyncpg/prepared_stmt.py\", line 256, in __do_execute\n    return await executor(protocol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"asyncpg/protocol/protocol.pyx\", line 185, in bind_execute\n  File \"asyncpg/protocol/prepared_stmt.pyx\", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg\nasyncpg.exceptions.DataError: invalid input for query argument $1: [-0.017596900463104248, -0.0377140715718... (expected str, got list)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 942, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 580, in execute\n    self._adapt_connection.await_(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self._prepare_and_execute(operation, parameters)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 558, in _prepare_and_execute\n    self._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 508, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 792, in _handle_exception\n    raise translated_error from error\nsqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: [-0.017596900463104248, -0.0377140715718... (expected str, got list)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/embeddings.py\", line 242, in semantic_job_search\n    result = await db.execute(query)\n             ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py\", line 463, in execute\n    result = await greenlet_spawn(\n             ^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 201, in greenlet_spawn\n    result = context.throw(*sys.exc_info())\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py\", line 305, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1416, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py\", line 515, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1638, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1843, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1983, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 2352, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py\", line 1964, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py\", line 942, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 580, in execute\n    self._adapt_connection.await_(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self._prepare_and_execute(operation, parameters)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 132, in await_only\n    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 196, in greenlet_spawn\n    value = await result\n            ^^^^^^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 558, in _prepare_and_execute\n    self._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 508, in _handle_exception\n    self._adapt_connection._handle_exception(error)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py\", line 792, in _handle_exception\n    raise translated_error from error\nsqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: [-0.017596900463104248, -0.0377140715718... (expected str, got list)\n[SQL: SELECT \"JobsApp_job\".id, \"JobsApp_job\".job_title, \"JobsApp_job\".seniority, \"JobsApp_job\".service, \"JobsApp_job\".industry, \"JobsApp_job\".location, \"JobsApp_job\".employment, \"JobsApp_job\".salary, \"JobsApp_job\".description, \"JobsApp_job\".link, \"JobsApp_job\".created_at, \"JobsApp_accountingfirm\".name AS firm_name, l2_distance(job_embeddings.embedding_vector, $1) AS similarity \nFROM job_embeddings JOIN \"JobsApp_job\" ON job_embeddings.job_id = \"JobsApp_job\".id JOIN \"JobsApp_accountingfirm\" ON \"JobsApp_job\".firm_id = \"JobsApp_accountingfirm\".id \nWHERE job_embeddings.embedding_vector IS NOT NULL AND lower(\"JobsApp_job\".location) LIKE $2::VARCHAR ORDER BY similarity \n LIMIT $3::INTEGER]\n[parameters: ([-0.017596900463104248, -0.037714071571826935, -0.014874106273055077, -0.04812519624829292, -0.03207346424460411, 0.023192504420876503, -0.03453372791 ... (34038 characters truncated) ... 37789873406291, -0.005190560594201088, -0.002342127962037921, -0.019652122631669044, -0.002910314127802849, 0.010321114212274551, -0.0248876865953207], '%new york%', 5)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 195, in process_job_preferences\n    matching_jobs = await semantic_job_search(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/embeddings.py\", line 262, in semantic_job_search\n    raise RuntimeError(f\"Failed to execute search query: {str(e)}\")\nRuntimeError: Failed to execute search query: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: [-0.017596900463104248, -0.0377140715718... (expected str, got list)\n[SQL: SELECT \"JobsApp_job\".id, \"JobsApp_job\".job_title, \"JobsApp_job\".seniority, \"JobsApp_job\".service, \"JobsApp_job\".industry, \"JobsApp_job\".location, \"JobsApp_job\".employment, \"JobsApp_job\".salary, \"JobsApp_job\".description, \"JobsApp_job\".link, \"JobsApp_job\".created_at, \"JobsApp_accountingfirm\".name AS firm_name, l2_distance(job_embeddings.embedding_vector, $1) AS similarity \nFROM job_embeddings JOIN \"JobsApp_job\" ON job_embeddings.job_id = \"JobsApp_job\".id JOIN \"JobsApp_accountingfirm\" ON \"JobsApp_job\".firm_id = \"JobsApp_accountingfirm\".id \nWHERE job_embeddings.embedding_vector IS NOT NULL AND lower(\"JobsApp_job\".location) LIKE $2::VARCHAR ORDER BY similarity \n LIMIT $3::INTEGER]\n[parameters: ([-0.017596900463104248, -0.037714071571826935, -0.014874106273055077, -0.04812519624829292, -0.03207346424460411, 0.023192504420876503, -0.03453372791 ... (34038 characters truncated) ... 37789873406291, -0.005190560594201088, -0.002342127962037921, -0.019652122631669044, -0.002910314127802849, 0.010321114212274551, -0.0248876865953207], '%new york%', 5)]\n(Background on this error at: https://sqlalche.me/e/20/dbapi)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:44:05.280465", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 247, "function": "process_job_preferences", "exc_type": "RuntimeError", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 735, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 247, in process_job_preferences\n    logger.error(f\"Error in semantic search: {error_type} - {error_msg}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T09:45:51.719412", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 737, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T09:45:53.539247", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T09:45:53.539306", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 40, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T09:45:53.564440", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 682, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T09:45:53.564480", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 683, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T09:45:53.564611", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 708, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T09:45:53.564650", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 711, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T09:45:53.713318", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 718, "function": "main"}
{"message": "Start command received from user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:45:58.952831", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 55, "function": "start"}
{"message": "Welcome message sent to user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:45:59.069515", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 67, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:45:59.069964", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 73, "function": "start"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:12.607035", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 138, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager jobs in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:12.607166", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:12.607226", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 143, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:14.187444", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 154, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:14.187970", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 169, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:17.522001", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 173, "function": "process_job_preferences"}
{"message": "Search completed in 9.72 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:22.327266", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 203, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:22.327498", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:22.327640", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 216, "function": "process_job_preferences"}
{"message": "Error in semantic search: KeyError - 'similarity_score'", "exc_info": "Traceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 218, in process_job_preferences\n    logger.debug(f\"Match: {job['firm_name']} - {job['job_title']} (Score: {job['similarity_score']:.2f})\")\n                                                                           ~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: 'similarity_score'", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:46:22.336349", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 247, "function": "process_job_preferences", "exc_type": "KeyError", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 735, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 247, in process_job_preferences\n    logger.error(f\"Error in semantic search: {error_type} - {error_msg}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T09:47:42.060393", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 737, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T09:48:40.691563", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T09:48:40.691704", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 41, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T09:48:40.717457", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 697, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T09:48:40.717503", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 698, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T09:48:40.717639", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 723, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T09:48:40.717681", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 726, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T09:48:40.829441", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 733, "function": "main"}
{"message": "Start command received from user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:48:54.404261", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 56, "function": "start"}
{"message": "Welcome message sent to user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:48:54.517987", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 68, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:48:54.518185", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 74, "function": "start"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:03.991986", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager jobs in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:03.992245", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 140, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:03.992414", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 144, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:04.955423", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 155, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:04.955747", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 170, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:08.247416", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 174, "function": "process_job_preferences"}
{"message": "Search completed in 8.73 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.718366", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.718729", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 205, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.718938", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 217, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Assurance Manager [Financial Services Group] (Score: 0.60)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.719155", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Winter 2026 Internship - New York City, NY (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.719334", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Summer 2026 Internship - New York City, NY (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.719498", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: Eisner Amper - Audit Manager - Governmental (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.719662", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.719822", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Error sending response: Can't parse entities: character '.' is reserved and must be escaped with the preceding '\\'", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:49:12.815178", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 251, "function": "process_job_preferences", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 750, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 251, in process_job_preferences\n    logger.error(f\"Error sending response: {str(e)}\")\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T09:50:17.979062", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 752, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T09:50:19.561595", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T09:50:19.561668", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 41, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T09:50:19.588186", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 737, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T09:50:19.588237", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 738, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T09:50:19.588377", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 763, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T09:50:19.588420", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 766, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T09:50:19.701966", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 773, "function": "main"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:31.834610", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager jobs in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:31.834723", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 140, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:31.834781", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 144, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:33.011675", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 155, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:33.012074", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 170, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:42.021870", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 174, "function": "process_job_preferences"}
{"message": "Search completed in 14.27 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.107251", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.107625", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 205, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.107850", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 217, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Assurance Manager [Financial Services Group] (Score: 0.60)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.108071", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Winter 2026 Internship - New York City, NY (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.108251", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Summer 2026 Internship - New York City, NY (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.108417", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: Eisner Amper - Audit Manager - Governmental (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.108582", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:50:46.108746", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T09:52:29.891388", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 792, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T09:52:31.482258", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T09:52:31.482331", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 41, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T09:52:31.507919", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 752, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T09:52:31.507964", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 753, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T09:52:31.508099", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 778, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T09:52:31.508140", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 781, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T09:52:31.636355", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 788, "function": "main"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:52:49.753860", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit tech roles in new york at director level", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:52:49.754182", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 140, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:52:49.754270", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 144, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit tech', 'location': 'new york', 'experience': 'manager or director', 'salary': None, 'search_type': 'specialized'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:52:50.842659", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 155, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:52:50.843074", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 170, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:52:59.760928", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 174, "function": "process_job_preferences"}
{"message": "Search completed in 13.88 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.637593", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.637945", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 205, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.638153", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 217, "function": "process_job_preferences"}
{"message": "Match: BDO USA - Assurance Director, Accounting Advisory & Outsourcing (Score: 0.56)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.638363", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: BDO USA - Assurance Director, Account Advisory & Outsourcing (Score: 0.58)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.638534", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: Anchin - Audit Director/Partner, Technology & Professional Services (Score: 0.58)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.638696", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: RSM US - Advisory Director - Internal Audit and SOX (Technology Industry Focus) (Score: 0.59)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.638855", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: Eisner Amper - Director \u2013 National Office of Professional Practice (Banking & Capital Markets) (Score: 0.59)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.639015", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Error sending markdown response: Message is too long", "exc_info": "Traceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 281, in process_job_preferences\n    await update.message.reply_text(\n    ...<3 lines>...\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_message.py\", line 1771, in reply_text\n    return await self.get_bot().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<20 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 2965, in send_message\n    return await super().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 1019, in send_message\n    return await self._send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<19 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 610, in _send_message\n    result = await super()._send_message(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 731, in _send_message\n    result = await self._post(\n             ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/request/_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/request/_baserequest.py\", line 383, in _request_wrapper\n    raise BadRequest(message)\ntelegram.error.BadRequest: Message is too long", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.753775", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 287, "function": "process_job_preferences", "exc_type": "BadRequest", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 805, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 287, in process_job_preferences\n    logger.error(f\"Error sending markdown response: {str(e)}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Error sending plain text response: Message is too long", "exc_info": "Traceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 281, in process_job_preferences\n    await update.message.reply_text(\n    ...<3 lines>...\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_message.py\", line 1771, in reply_text\n    return await self.get_bot().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<20 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 2965, in send_message\n    return await super().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 1019, in send_message\n    return await self._send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<19 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 610, in _send_message\n    result = await super()._send_message(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 731, in _send_message\n    result = await self._post(\n             ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/request/_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/request/_baserequest.py\", line 383, in _request_wrapper\n    raise BadRequest(message)\ntelegram.error.BadRequest: Message is too long\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 302, in process_job_preferences\n    await update.message.reply_text(\n    ...<2 lines>...\n    )\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_message.py\", line 1771, in reply_text\n    return await self.get_bot().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<20 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 2965, in send_message\n    return await super().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 1019, in send_message\n    return await self._send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<19 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 610, in _send_message\n    result = await super()._send_message(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 731, in _send_message\n    result = await self._post(\n             ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/request/_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/request/_baserequest.py\", line 383, in _request_wrapper\n    raise BadRequest(message)\ntelegram.error.BadRequest: Message is too long", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:03.803791", "level": "ERROR", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 307, "function": "process_job_preferences", "exc_type": "BadRequest", "stack_trace": ["  File \"<frozen runpy>\", line 198, in _run_module_as_main\n", "  File \"<frozen runpy>\", line 88, in _run_code\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 805, in <module>\n    asyncio.run(main())\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 194, in run\n    return runner.run(main)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 707, in run_until_complete\n    self.run_forever()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 678, in run_forever\n    self._run_once()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py\", line 2033, in _run_once\n    handle._run()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1248, in _update_fetcher\n    await self.__update_fetcher()\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1244, in __update_fetcher\n    await self.__process_update_wrapper(update)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1259, in __process_update_wrapper\n    await self._update_processor.process_update(update, self.process_update(update))\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 157, in process_update\n    await self.do_process_update(update, coroutine)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_baseupdateprocessor.py\", line 182, in do_process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_application.py\", line 1325, in process_update\n    await coroutine\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/conversationhandler.py\", line 842, in handle_update\n    new_state: object = await handler.handle_update(\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/telegram/ext/_handlers/basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/telegram_bot.py\", line 307, in process_job_preferences\n    logger.error(f\"Error sending plain text response: {str(e2)}\", exc_info=True)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1664, in _log\n    self.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1026, in handle\n    self.emit(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/handlers.py\", line 81, in emit\n    logging.FileHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1264, in emit\n    StreamHandler.emit(self, record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 1150, in emit\n    msg = self.format(record)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py\", line 998, in format\n    return fmt.format(record)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/venv/lib/python3.13/site-packages/pythonjsonlogger/jsonlogger.py\", line 243, in format\n    self.add_fields(log_record, record, message_dict)\n", "  File \"/Users/dudleygould/fastapi-job-matching-bot/app/logging_config.py\", line 44, in add_fields\n    log_record['stack_trace'] = traceback.format_stack()\n"]}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:23.025410", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager jobs in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:23.025730", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 140, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:23.025817", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 144, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:23.818048", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 155, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:23.818392", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 170, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:26.263533", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 174, "function": "process_job_preferences"}
{"message": "Search completed in 5.08 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.104579", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.104925", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 205, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.105138", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 217, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Assurance Manager [Financial Services Group] (Score: 0.60)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.105339", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Winter 2026 Internship - New York City, NY (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.105522", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Summer 2026 Internship - New York City, NY (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.105698", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: Eisner Amper - Audit Manager - Governmental (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.105871", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:53:28.106040", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Bot stopped by user", "taskName": null, "timestamp": "2025-02-06T09:54:21.229799", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 807, "function": "<module>"}
{"message": "Logger configured", "taskName": null, "logger_name": "__main__", "handlers": ["console", "file"], "environment": "production", "timestamp": "2025-02-06T09:54:22.655853", "level": "INFO", "is_test": false, "file": "logging_config.py", "line": 84, "function": "get_logger"}
{"message": "\ud83d\ude80 Starting bot in production environment using bot token: 75673047...", "taskName": null, "timestamp": "2025-02-06T09:54:22.655924", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 41, "function": "<module>"}
{"message": "Starting bot initialization...", "taskName": "Task-1", "timestamp": "2025-02-06T09:54:22.680829", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 769, "function": "main"}
{"message": "Using token: 75673...", "taskName": "Task-1", "timestamp": "2025-02-06T09:54:22.680868", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 770, "function": "main"}
{"message": "Handlers registered successfully", "taskName": "Task-1", "timestamp": "2025-02-06T09:54:22.681000", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 795, "function": "main"}
{"message": "\ud83e\udd16 Bot is now polling for messages...", "taskName": "Task-1", "timestamp": "2025-02-06T09:54:22.681040", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 798, "function": "main"}
{"message": "Bot is running. Press Ctrl+C to stop", "taskName": "Task-1", "timestamp": "2025-02-06T09:54:22.827406", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 805, "function": "main"}
{"message": "Starting job preference processing for user 6136408822", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:31.790542", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 6136408822: audit manager roles in new york", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:31.791317", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 140, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:31.791499", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 144, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:32.728478", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 155, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:32.728947", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 170, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:41.622315", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 174, "function": "process_job_preferences"}
{"message": "Search completed in 13.73 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.521450", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.521818", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 205, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.522017", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 217, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Assurance Manager [Financial Services Group] (Score: 0.62)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.522177", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Winter 2026 Internship - New York City, NY (Score: 0.63)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.522304", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Summer 2026 Internship - New York City, NY (Score: 0.64)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.522420", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.64)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.522555", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.64)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:54:45.522668", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Start command received from user 228763766", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:55:45.423419", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 56, "function": "start"}
{"message": "Welcome message sent to user 228763766", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:55:45.566031", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 68, "function": "start"}
{"message": "Checking if user exists in database...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:55:45.566441", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 74, "function": "start"}
{"message": "Creating new user...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:55:47.668863", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 83, "function": "start"}
{"message": "New user registered: 228763766", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:55:48.630368", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 92, "function": "start"}
{"message": "Starting job preference processing for user 228763766", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:14.810314", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 139, "function": "process_job_preferences"}
{"message": "Processing job preferences for user 228763766: Audit manager in new York", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:14.810596", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 140, "function": "process_job_preferences"}
{"message": "Calling extract_job_preferences", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:14.810748", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 144, "function": "process_job_preferences"}
{"message": "Extracted preferences: {'role': 'audit manager', 'location': 'new york', 'experience': 'manager', 'salary': None, 'search_type': 'job_title'}", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:15.836973", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 155, "function": "process_job_preferences"}
{"message": "Checking database state before search...", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:15.837270", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 170, "function": "process_job_preferences"}
{"message": "Database state: 7635 jobs, 7426 embeddings, 63 firms", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:17.933806", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 174, "function": "process_job_preferences"}
{"message": "Search completed in 5.11 seconds", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.922449", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 204, "function": "process_job_preferences"}
{"message": "Found 5 matching jobs", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.922765", "level": "INFO", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 205, "function": "process_job_preferences"}
{"message": "Job matches found:", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.922927", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 217, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Assurance Manager [Financial Services Group] (Score: 0.54)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.923087", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.56)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.923233", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: UHY - Audit Manager (Score: 0.56)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.923372", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: Baker Tilly USA - Audit Manager (Score: 0.56)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.923508", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
{"message": "Match: CohnReznick - Audit Winter 2026 Internship - New York City, NY (Score: 0.56)", "taskName": "Application:7567304791:update_fetcher", "timestamp": "2025-02-06T09:56:19.923644", "level": "DEBUG", "environment": "production", "is_test": false, "file": "telegram_bot.py", "line": 225, "function": "process_job_preferences"}
